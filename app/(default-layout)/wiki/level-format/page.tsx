import { Metadata } from "next";

export const metadata: Metadata = {
    title: "Формат битмап файла для ритм шутера Beam & Beat",
    description: "Техническая спецификация: структура JSON файлов уровня, описание полей beatmap и info."
};

export default function LevelFormatPage() {
    return (
        <>
            <h1 id="format">Формат битмап файла для ритм шутера</h1>
            <p>
                Если вы хотите создавать уровни вручную или написать свой конвертер, вам пригодится детальное описание формата битмап файла для ритм шутера Beam & Beat.
            </p>

            <h2 id="structure">Структура архива (.zip)</h2>
            <p>
                Игра принимает уровни в виде распакованных ZIP-архивов. В корне архива обязательно должны находиться три файла.
            </p>
            <ul className="list-disc pl-6 space-y-2">
                <li><code>info.json</code> — Паспорт уровня (метаданные).</li>
                <li><code>beatmap.json</code> — Сценарий геймплея (ноты и тайминги).</li>
                <li><code>audio.wav</code> — Аудиофайл (название указывается в info.json).</li>
            </ul>

            <h2 id="info-json">Метаданные (info.json)</h2>
            <p>
                Этот файл отвечает за отображение уровня в меню выбора песен. Игра считывает его первым.
            </p>
            
<pre className="text-sm font-mono m-0">{`{
  "id": "MyLevel_v1",                   // Уникальный ID уровня (для сохранений и запуска в игре)
  "audioInfo": {
    "title": "Song Title",              // Название трека в меню
    "artist": "Artist Name",            // Исполнитель
    "fileName": "track.wav"             // Точное имя файла в архиве!
  },
  "levelInfo": {
    "authors": ["Mapper1", "Mapper2"],  // Список авторов карты
    "difficulty": "Normal",             // Сложность (Easy, Normal, Hard, Expert)
    "version": "1.0.0",                 // Версия карты
    "beatmapFileName": "beatmap.json"   // Ссылка на файл карты
  }
}`}</pre>

            <blockquote>
                <strong>Важно:</strong> Поле <code>id</code> используется для корректного запуска уровня в игре и создания файла сохранения (<code>.sav</code>). Крайне не рекомендуется редактировать это поле. Оно должно совпадать с названием папки уровня.
            </blockquote>

            <h2 id="beatmap-json">Карта битов (beatmap.json)</h2>
            <p>
                Здесь хранится логика геймплея. Файл состоит из двух основных секций: глобальных настроек и массива нот.
            </p>

            <h3>Секция Settings</h3>
            <p>
                Определяет, как интерпретировать время и физику объектов.
            </p>

<pre className="text-sm font-mono m-0">{`"settings": {
  "bpm": 128.0,      // Удары в минуту (Float)
  "offset": 0.05,    // Сдвиг начала сетки в секундах (Float)
  "properties": {
     "power": 1500   // Базовая скорость полета целей
  }
}`}</pre>

            <h3>Секция Notes (Массив)</h3>
            <p>
                Список всех игровых объектов. Каждая нота — это объект с тремя полями:
            </p>
            <ul className="list-disc pl-6 space-y-2">
                <li><strong>beat</strong> (float): Временная метка в битах. Например, <code>4.0</code> — начало 4-го удара, <code>4.5</code> — слабая доля.</li>
                <li><strong>id</strong> (int): Координата на сетке 7x7. Значения от <code>0</code> (левый нижний угол) до <code>48</code> (правый верхний).</li>
                <li><strong>properties</strong> (object, optional): Переопределение глобальных настроек для конкретной ноты (например, изменение скорости).</li>
            </ul>

<pre className="text-sm font-mono m-0">{`"notes": [
  {
    "beat": 4.0,
    "id": 24,        // Центр сетки (для поля 7x7)
    "properties": {
       "power": 2000 // Эта нота полетит выше остальных
    }
  },
  { "beat": 5.0, "id": 25 } // Обычная нота с высотой по умолчанию
]`}</pre>
            
            <h3>Система координат (ID)</h3>
            <p>
                Игровое поле представляет собой сетку 7x7. В редакторе каждая ячейка поля пронумерована в соответствии с расположением спавнера в игре. Игрок направлен на игровое поле в сторону ячеек с номерами 0 - 6.
            </p>
        </>
    );
}